# EdgeWatch Telemetry Contract (v1)
#
# This is a *lightweight* data contract for metric keys and expected types.
#
# Notes:
# - Unknown keys are allowed by default (additive drift).
# - Known keys must match the declared type (breaking drift is rejected).
# - Use this file to align ingest payloads, UI charts, and downstream processing.

version: v1

metrics:
  water_pressure_psi:
    type: number
    unit: psi
    description: Water pressure at the sensor.

  oil_pressure_psi:
    type: number
    unit: psi
    description: Oil pressure at the sensor (when pump is on).

  temperature_c:
    type: number
    unit: celsius
    description: Ambient temperature near the device.

  humidity_pct:
    type: number
    unit: percent
    description: Ambient relative humidity near the device.

  oil_level_pct:
    type: number
    unit: percent
    description: Oil reservoir level (0-100%).

  oil_life_pct:
    type: number
    unit: percent
    description: Remaining oil life percentage (runtime-derived; manual reset).

  drip_oil_level_pct:
    type: number
    unit: percent
    description: Drip oiler reservoir level (0-100%).

  battery_v:
    type: number
    unit: volts
    description: Battery voltage.

  signal_rssi_dbm:
    type: number
    unit: dBm
    description: Cellular/WiFi RSSI (dBm).

  cellular_rsrp_dbm:
    type: number
    unit: dBm
    description: LTE reference signal received power (best effort from modem).

  cellular_rsrq_db:
    type: number
    unit: dB
    description: LTE reference signal received quality (best effort from modem).

  cellular_sinr_db:
    type: number
    unit: dB
    description: LTE signal-to-interference-plus-noise ratio (best effort from modem).

  cellular_registration_state:
    type: string
    description: Cellular registration state as reported by modem manager (for example home/roaming/searching).

  cellular_bytes_sent_today:
    type: number
    unit: bytes
    description: Best-effort bytes transmitted by the active network interface for the current UTC day.

  cellular_bytes_received_today:
    type: number
    unit: bytes
    description: Best-effort bytes received by the active network interface for the current UTC day.

  link_ok:
    type: boolean
    description: Connectivity watchdog result; true when DNS + HTTP checks both succeed.

  link_last_ok_at:
    type: string
    description: Last watchdog success timestamp in ISO-8601 UTC format.

  pump_on:
    type: boolean
    description: Whether the pump is currently running.

  flow_rate_gpm:
    type: number
    unit: gpm
    description: Flow rate (gallons per minute).

  device_state:
    type: string
    description: Optional string state emitted by the device (e.g., OK/WARN/ERROR).
