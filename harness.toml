[project]
name = "edgewatch-telemetry"
description = "Local-first edge telemetry platform (edge agent → API → Postgres → alerts + dashboard)."

[harness]
# Fail fast stops on first failing step. Set false to run everything and summarize.
fail_fast = true

[autodetect]
# Preferred runners (used when the corresponding project files are detected).
python_runner = "uv"
node_runner = "pnpm"

# If true and a workspace is detected, run scripts recursively with --if-present.
node_recursive = true

# If "auto", Go/Rust advanced linters run only when their tool/config is present.
go_use_golangci_lint = "auto"  # auto | true | false
rust_use_clippy = "auto"       # auto | true | false

# If true, missing tools/config produce SKIP (non-fatal). Use --strict to treat SKIP as failure.
skip_missing_tools = true

[autodetect.python]
# Opinionated defaults used when a Python project is detected.
linter = "ruff"          # auto | ruff
formatter = "ruff"       # auto | ruff
typechecker = "pyright"  # auto | pyright | mypy
testrunner = "pytest"    # auto | pytest

# Commands can be set explicitly, or left empty to use auto-detection across ecosystems.
[commands]
fmt = ""
lint = ""
# Keep unit tests hermetic on developer machines without libpq.
test = "DATABASE_URL=sqlite+pysqlite:///:memory: uv run --locked pytest"
typecheck = ""
build = "pnpm -r --if-present build"

# Optional: paths to help agents find important areas
[paths]
source = [
  "api/app",
  "agent",
  "web/src",
  "infra/gcp"
]
tests = ["tests"]
docs = ["docs", "README.md", "ARCHITECTURE.md", "RUNBOOK.md", "SECURITY.md"]
