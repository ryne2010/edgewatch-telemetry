# EdgeWatch agent config

EDGEWATCH_API_URL=http://localhost:8082
EDGEWATCH_DEVICE_ID=demo-well-001
EDGEWATCH_DEVICE_TOKEN=dev-device-token-001

# Sensor backend controls
# - Default backend is mock when SENSOR_CONFIG_PATH is not set.
# - SENSOR_BACKEND overrides the backend selected in the YAML file.
# SENSOR_CONFIG_PATH=./agent/config/example.sensors.yaml
# SENSOR_BACKEND=mock
#
# Raspberry Pi BME280 example:
# SENSOR_BACKEND=rpi_i2c
# (requires `pip install smbus2`)
#
# Raspberry Pi ADS1115 example:
# SENSOR_BACKEND=rpi_adc
# (requires `pip install smbus2`)
#
# Derived oil-life model example:
# SENSOR_BACKEND=derived
# (configure state_path/oil_life_max_run_hours in SENSOR_CONFIG_PATH YAML)

# Cache the last-known device policy (ETag + payload)
# Default is device-specific: ./edgewatch_policy_cache_<device_id>.json
# EDGEWATCH_POLICY_CACHE_PATH=./edgewatch_policy_cache_demo-well-001.json

# Media capture (Task 12a)
# Enable scheduled snapshots into a local ring buffer.
# MEDIA_ENABLED=false
# CAMERA_IDS=cam1
# MEDIA_SNAPSHOT_INTERVAL_S=300
# MEDIA_CAPTURE_RETRY_S=60
# MEDIA_RING_DIR=./edgewatch_media
# MEDIA_RING_MAX_BYTES=524288000
# MEDIA_CAPTURE_TIMEOUT_S=15
# MEDIA_CAPTURE_LOCK_TIMEOUT_S=5

# Local buffer (SQLite) for offline operation
BUFFER_DB_PATH=./edgewatch_buffer.sqlite

# Optional: write "poison" telemetry points (validation errors) here so they
# don't block buffer flush.
# EDGEWATCH_DEADLETTER_PATH=./edgewatch_deadletter_demo-well-001.jsonl

# -----------------------------------------------------------------------------
# Fallback policy (ONLY used when /api/v1/device-policy cannot be fetched)
# In normal operation, tune contracts/edge_policy/v1.yaml instead.
# -----------------------------------------------------------------------------

SAMPLE_INTERVAL_S=30
ALERT_SAMPLE_INTERVAL_S=10
HEARTBEAT_INTERVAL_S=300
ALERT_REPORT_INTERVAL_S=60

MAX_POINTS_PER_BATCH=50
BUFFER_MAX_POINTS=5000
BUFFER_MAX_AGE_S=604800

BACKOFF_INITIAL_S=5
BACKOFF_MAX_S=300

WATER_PRESSURE_LOW_PSI=30.0
WATER_PRESSURE_RECOVER_PSI=32.0

BATTERY_LOW_V=11.8
BATTERY_RECOVER_V=12.0

SIGNAL_LOW_RSSI_DBM=-95
SIGNAL_RECOVER_RSSI_DBM=-90

DELTA_WATER_PRESSURE_PSI=1.0
DELTA_OIL_PRESSURE_PSI=1.0
DELTA_TEMPERATURE_C=0.5
DELTA_BATTERY_V=0.05
DELTA_SIGNAL_RSSI_DBM=2
