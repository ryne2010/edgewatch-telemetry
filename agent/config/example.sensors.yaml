backend: composite
backends:
  # Minimal Raspberry Pi profile is microphone-only:
  # - backend: rpi_microphone
  #   rpi_microphone:
  #     device: default
  #     sample_rate_hz: 16000
  #     capture_seconds: 2.0
  #     command_timeout_s: 6.0
  #     warning_interval_s: 300
  #
  # Optional solar/12V power monitor profile:
  # - backend: rpi_power_i2c
  #   rpi_power_i2c:
  #     sensor: ina260
  #     bus: 1
  #     address: 0x40
  #     shunt_ohms: 0.1
  #     source_solar_min_v: 13.2
  #     warning_interval_s: 300
  #
  # Legacy multi-sensor profile kept for future expansion:
  - backend: mock
  # Replace mock with rpi_i2c on Raspberry Pi once BME280 is wired.
  # - backend: rpi_i2c
  #   rpi_i2c:
  #     sensor: bme280
  #     bus: 1
  #     address: 0x76
  #     warning_interval_s: 300
  # Replace mock with rpi_adc when ADS1115 channels are wired.
  # - backend: rpi_adc
  #   adc:
  #     type: ads1115
  #     bus: 1
  #     address: 0x48
  #     gain: 1
  #     data_rate: 128
  #     median_samples: 3
  #     warning_interval_s: 300
  - backend: derived
    derived:
      oil_life_max_run_hours: 300
      state_path: ./agent/state/oil_life_state.json
      run_on_threshold: 25
      run_off_threshold: 20

# Channel mapping for ADS1115 analog lanes.
channels:
  water_pressure_psi:
    channel: 0
    kind: current_4_20ma
    unit: psi
    shunt_ohms: 165
    scale:
      from: [4.0, 20.0]
      to: [0.0, 100.0]
  oil_pressure_psi:
    channel: 1
    kind: current_4_20ma
    unit: psi
    shunt_ohms: 165
    scale:
      from: [4.0, 20.0]
      to: [0.0, 100.0]
  oil_level_pct:
    channel: 2
    kind: current_4_20ma
    unit: pct
    shunt_ohms: 165
    scale:
      from: [4.0, 20.0]
      to: [0.0, 100.0]
  drip_oil_level_pct:
    channel: 3
    kind: current_4_20ma
    unit: pct
    shunt_ohms: 165
    scale:
      from: [4.0, 20.0]
      to: [0.0, 100.0]

scaling:
  pressure_clamp_min: 0.0
  pressure_clamp_max: 100.0
